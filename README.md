# NUPAC 
Nu package manager written entirely in nu

## Current status:
**Development started**

## Name
To be discussed, just a suggestion.


## What would it do?
Download nu scripts, functions, plugins etc. and install them in valid locations (or add to config).


## How would it work?
### Server side
- Autogenerated (using nu script manifest parser) repository file 

In the beginning we could operate on raw plain text with source on Github. Developing kind of our own repo shouldn't be a priority.

Note that keeping such file would be a security measurement, since users would be able to download only code approved in PRs.


### User side
1) Fetch and then keep up to date .nu from the server (like `pacman -Sy`/`apt update` updating mirrorlist)
2) Look for the query in the fetched "mirrorlist"
3) Download the file and put it in ./local/bin or source it 

### Additional notes:
- Update would simply mean download and replace in case your version is older than the one in .nu.
- Scripts would be kept in a fixed location, e.g. ~/.config/nushell/nupac/scripts
- ~/.config/nushell/nupac/.local_state file should be a simple file with scripts names and their versions to easily look for updates.
- There should be a config entry in nupac's config that allows to ignore specific package names from installing or upgrading (see: [ignorepkg in pacman](https://wiki.archlinux.org/title/Pacman#Configuration))


## Desired output of search
```
Found 1 package!
wolfram (1.0) — WolframAlpha API wrappers written entirely in nu [not installed]
Proceed to install? [Y/n]
```

and when installed...

```
Found 1 package!
wolfram (1.0) — WolframAlpha API wrappers written entirely in nu [installed]
Proceed to reinstall? [y/N]
```


## Proposed list of commands
- `nupac install` — download to /home/$username/.config/nu/scripts and source package in config or add the script to /home/$username/./local/bin
- `nupac uninstall` — delete package and unsource it from config if needed.
- `nupac search` — just look for the matching package(s) in our "mirrorlist" .csv and list all packages with version, description and installation status.
- `nupac upgrade` — update "mirrorlist", then look for newer versions of package(s) from ~/.config/nushell/nupac/.local_state
  - `--all` flag to update everything
  - `--ignore-self` to prevent nupac from self-upgrading


## TODO list and progress status:
Firstly I have to say that I'll focus on Linux development. When nupac works flawlessly on Linux, I'll start adjusting it to Windows as well. I'm going to need someone that could test and debug the script on Mac.

I'd rather have the list completed accordingly to this order but of course any help is appreciated.

- [ ] Nushell script template is approved and forced in nu_scripts repo, there is also an auto-generator
- [ ] nu_scripts have repo file and autogenerator for it
- [ ] `nupac install`
- [ ] `nupac search`
- [ ] `nupac uninstall`
- [ ] `nupac upgrade`
- [ ] Start porting to Windows
- [ ] Find a tester for Mac
- [ ] Add package description from `packages_list.nu` handling for `nupac install` and `nupac search` (Mentioned [here](#desired-output-of-search))
- [ ] Write a simple documentation
- [ ] Plan and organize merging `nupac` with the [main repo](https://github.com/nushell/nushell). 
- [ ] Further development in a more or less distant future...
